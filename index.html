<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gomoku</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="switch-container">
        <!-- Main Game Hub -->
        <div id="app-hub">
            <header class="hub-header">
                <h1>Game Hub</h1>
            </header>
            <div class="carousel-container">
                <button class="nav-btn prev-btn" onclick="prevGame()">&#10094;</button>
                <div class="carousel-track-container">
                    <ul class="carousel-track" id="game-carousel">
                        <!-- Cards injected via JS -->
                    </ul>
                </div>
                <button class="nav-btn next-btn" onclick="nextGame()">&#10095;</button>
            </div>
        </div>

        <!-- Gomoku (Existing App Wrapped) -->
        <div id="app-gomoku" class="hidden">
            <main class="switch-card">
                <h1>五子棋</h1>

                <!-- Landing Page / Game Selection -->
                <div id="landing-page">
                    <div class="landing-actions">
                        <button class="pill-btn mode-btn" onclick="selectMode('ai')">對 AI 對戰</button>
                        <button class="pill-btn mode-btn" onclick="selectMode('online')">Online 對戰</button>
                        <button class="pill-btn secondary" onclick="showApp('hub')">返回遊戲大廳</button>
                    </div>
                </div>

                <!-- Game Container (Hidden on Landing) -->
                <div id="game-container" class="hidden">

                    <!-- VS AI Specific Controls -->
                    <div id="ai-controls" class="hidden">
                        <div class="controls-card">
                            <label for="difficulty">難度：</label>
                            <select id="difficulty" class="pill-select">
                                <option value="easy">Easy</option>
                                <option value="medium">Medium</option>
                                <option value="hard" selected>Hard</option>
                            </select>
                            <button class="pill-btn secondary" onclick="backToLanding()">返回選單</button>
                        </div>
                    </div>

                    <!-- Online Lobby (Room List) -->
                    <div id="online-lobby" class="hidden">
                        <h3>選擇房間</h3>
                        <div class="room-grid">
                            <div class="room-card" onclick="joinRoom('room1')">
                                <div class="room-name">Room 1</div>
                                <div class="room-stats"><span id="room1-count">--</span></div>
                            </div>
                            <div class="room-card" onclick="joinRoom('room2')">
                                <div class="room-name">Room 2</div>
                                <div class="room-stats"><span id="room2-count">--</span></div>
                            </div>
                            <div class="room-card" onclick="joinRoom('room3')">
                                <div class="room-name">Room 3</div>
                                <div class="room-stats"><span id="room3-count">--</span></div>
                            </div>
                        </div>
                        <button class="pill-btn secondary" onclick="backToLanding()">返回選單</button>
                    </div>

                    <!-- Online Room View (Board + Details) -->
                    <div id="online-room" class="hidden">
                        <div class="room-header-card">
                            <div class="room-status">
                                <span class="label">房間：</span><span id="current-room-id" class="value"></span>
                                <span class="divider">|</span>
                                <span class="label">身份：</span><span id="my-role" class="value">觀眾</span>
                            </div>
                        </div>

                        <div id="role-selection">
                            <button id="btn-claim-black" class="pill-btn role-btn"
                                onclick="becomePlayer('black')">成為黑子玩家</button>
                            <button id="btn-claim-white" class="pill-btn role-btn"
                                onclick="becomePlayer('white')">成為白子玩家</button>
                            <button id="btn-claim-spec" class="pill-btn role-btn secondary"
                                onclick="becomeSpectator()">成為觀戰者</button>
                        </div>

                        <div class="room-actions">
                            <button id="online-start-btn" class="pill-btn action-btn hidden"
                                onclick="startOnlineGame()">開始遊戲</button>
                            <button id="leave-room-btn" class="pill-btn danger-btn" onclick="leaveRoom()">退出房間</button>
                        </div>
                    </div>

                    <!-- Common Game Elements (Board, Status) -->
                    <div id="game-board-area" class="hidden">
                        <div class="board-frame">
                            <div id="board"></div>
                        </div>
                        <div id="status-bar">
                            <div id="status">當前回合：<span class="player-turn">黑子</span></div>
                        </div>
                        <button id="reset-btn" class="pill-btn action-btn" onclick="resetGame()">重新開始</button>
                    </div>

                </div>
            </main>
        </div>

        <!-- Penny Crush App -->
        <div id="app-penny-crush" class="hidden">
            <div class="penny-center-wrapper">
                <main class="switch-card penny-container">
                    <header class="penny-header">
                        <h1>Penny Crush</h1>
                        <div class="score-board">Score: <span id="pc-score">0</span></div>
                    </header>

                    <div id="pc-menu">
                        <p class="menu-label">Select Board Size:</p>
                        <button class="pill-btn pc-btn" onclick="PennyCrush.init(8)">8x8 (Normal)</button>
                        <button class="pill-btn pc-btn" onclick="PennyCrush.init(10)">10x10 (Hard)</button>
                        <button class="pill-btn pc-btn" onclick="PennyCrush.init(12)">12x12 (Extreme)</button>
                        <button class="pill-btn secondary" onclick="showApp('hub')">Back to Menu</button>
                    </div>

                    <div id="pc-game" class="hidden">
                        <div id="pc-grid" class="pc-grid"></div>
                        <div class="pc-controls">
                            <div class="pc-tools">
                                <button id="btn-clean-one" class="pill-btn tool-btn"
                                    onclick="PennyCrush.activateCleanOne()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path
                                            d="M19 3L14 8M14 8L5 17C4.4 17.6 4.4 18.5 5 19C5.6 19.6 6.5 19.5 7 19L16 10M14 8L16 10"
                                            stroke-linecap="round" />
                                        <path d="M8 16L12 12" opacity="0.5" />
                                    </svg>
                                    Clean (3)
                                </button>
                                <button id="btn-forced-swap" class="pill-btn tool-btn"
                                    onclick="PennyCrush.activateForcedSwap()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16"
                                            stroke-linecap="round" stroke-linejoin="round" />
                                    </svg>
                                    Swap (3)
                                </button>
                            </div>
                            <div class="pc-actions">
                                <button id="btn-shuffle" class="pill-btn secondary" onclick="PennyCrush.shuffleBoard()">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M4 4L9 9M20 4L15 9M20 20L15 15M4 20L9 15" stroke-linecap="round" />
                                        <circle cx="12" cy="12" r="3" />
                                    </svg>
                                    Shuffle (3)
                                </button>
                                <button class="pill-btn secondary" onclick="PennyCrush.restart()">Restart</button>
                                <button class="pill-btn secondary" onclick="PennyCrush.exit()">Back to Menu</button>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>
    <script type="module" src="script.js"></script>
</body>

</html>